<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[分类技术 | Castiel Blog]]></title>
  <link href="http://suerzhang.github.io/blog/categories/技术/atom.xml" rel="self"/>
  <link href="http://suerzhang.github.io/"/>
  <updated>2014-12-27T00:46:21+08:00</updated>
  <id>http://suerzhang.github.io/</id>
  <author>
    <name><![CDATA[Castiel]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[添加多说评论]]></title>
    <link href="http://suerzhang.github.io/blog/20141227/tian-jia-duo-shuo-ping-lun.html/"/>
    <updated>2014-12-27T00:01:00+08:00</updated>
    <id>http://suerzhang.github.io/blog/20141227/tian-jia-duo-shuo-ping-lun</id>
    <content type="html"><![CDATA[<p>最近又突然想给博客做点改变，然后看到其他人添加了很多东西，今天就先添加一个评论吧。看到多说貌似不错，就用他了。</p>

<h3>首先去多说注册个账号</h3>

<p>自己百度</p>

<h3>添加评论</h3>

<p>在_config.yml 中添加</p>

<p>$$# duoshuo comments
duoshuo_comments: true
duoshuo_short_name: yourname #这里的yourname是你在多说注册的二级域名，比如我是superzhang.duoshuo.com.这里就填superzhang$$</p>

<p>在 source/_layouts/post.html 中的 disqus代码</p>

<p>$${% if site.disqus_short_name and page.comments == true %}
  <section></p>

<pre><code>&lt;h1&gt;Comments&lt;/h1&gt;
&lt;div id="disqus_thread" aria-live="polite"&gt;{% include post/disqus_thread.html %}&lt;/div&gt;
</code></pre>

<p>  </section>
{% endif %}$$</p>

<p>下方添<strong>加多说评论</strong>模块</p>

<p>如果你希望一些单独的页面下方也放置评论功能，譬如 rake new_page["xxx"] 产生的页面也能评论，那么请在 source/_layouts/page.html 中也做如上的修改。</p>

<p>创建一个<strong>source/_includes/post/duoshuo.html</strong></p>

<p>随后，再修改<strong>_includes/article.html</strong>，在</p>

<p>$${% if site.disqus_short_name and page.comments != false and post.comments != false and site.disqus_show_comment_count == true %}</p>

<pre><code>     | &lt;a href="{% if index %}{{ root_url }}{{ post.url }}{% endif %}#disqus_thread"&gt;Comments&lt;/a&gt;
    {% endif %}$$
</code></pre>

<p> 下方添加
 `{% if site.duoshuo_short_name and page.comments != false and post.comments != false and site.duoshuo_comments == true %}</p>

<pre><code>      | &lt;a href="{% if index %}{{ root_url }}{{ post.url }}{% endif %}#comments"&gt;Comments&lt;/a&gt;
     {% endif %}`
</code></pre>

<p> ###侧边栏插入最新评论</p>

<p> 首先在<strong>_config.yml</strong>中再插入如下代码</p>

<p> <code>duoshuo_asides_num: 10      # 侧边栏评论显示条目数
duoshuo_asides_avatars: 0   # 侧边栏评论是否显示头像
duoshuo_asides_time: 0      # 侧边栏评论是否显示时间
duoshuo_asides_title: 0     # 侧边栏评论是否显示标题
duoshuo_asides_admin: 0     # 侧边栏评论是否显示作者评论
duoshuo_asides_length: 18   # 侧边栏评论截取的长度
</code></p>

<p>再创建_includes/custom/asides/recent_comments.html
`<section></p>

<h1>Recent Comments</h1>


<ul class="ds-recent-comments" data-num-items="{{ site.duoshuo_asides_num }}" data-show-avatars="{{ site.duoshuo_asides_avatars }}" data-show-time="{{ site.duoshuo_asides_time }}" data-show-title="{{ site.duoshuo_asides_title }}" data-show-admin="{{ site.duoshuo_asides_admin }}" data-excerpt-length="{{ site.duoshuo_asides_length }}"></ul>


<p>{% if index %}</p>

<!--多说js加载开始，一个页面只需要加载一次 -->


<script type="text/javascript">
  var duoshuoQuery = {short_name:"{{ site.duoshuo_short_name }}"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = 'http://static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script>


<!--多说js加载结束，一个页面只需要加载一次 -->


<p>{% endif %}
</section>`</p>

<p>最后，在<strong>_config.yml</strong>中的blog_index_asides行或pages_asides行或post_asides添加</p>

<p><code>custom/asides/recent_comments.html</code></p>

<p>rake 下就可以看效果了</p>
]]></content>
  </entry>
  
</feed>
